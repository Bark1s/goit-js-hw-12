{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { page } from \"../main\";\n\n// export function fetchImages(input) {\n//     const searchParams = new URLSearchParams({\n//         key: \"43196353-af8080fd641e1fef708fa4d1d\",\n//         q: input,\n//         image_type: \"photo\",\n//         orientation: \"horizontal\",\n//         safesearch: true,\n//     });\n    \n//     const url = `https://pixabay.com/api/?${searchParams}`;\n\n//     return fetch(url).then(response => {\n//             if (!response.ok) {\n//                 throw new Error(response.status);\n//             }\n//             return response.json();\n//         })\n//         .catch(error => {\n//             console.log(error);\n//         })\n// }\n\nexport const fetchImages = async (input) => {\n    try {\n    const response = await axios.get(\"https://pixabay.com/api/?\", {\n        params: {\n            key: \"43196353-af8080fd641e1fef708fa4d1d\",\n            q: input,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: 15,\n            page: page,\n        }\n    });\n        return response.data;\n    } catch (error) {\n        console.log(error);\n    }\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { lightbox } from \"../main\";\nimport {loadScreen} from \"../main\";\nimport { hideLoadScreen } from \"../main\";\nimport {loadMoreBtn} from \"../main\";\nimport { hideLoadMoreBtn } from \"../main\";\nimport { showLoadMoreBtn } from \"../main\";\n\nexport const gallery = document.querySelector(\".gallery\");\n\nexport function renderImages(array) {\n    if (array.length < 1) {\n        iziToast.show({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            color: 'red',\n            position: 'topRight',\n        });\n        hideLoadMoreBtn();\n        hideLoadScreen();\n    } else {\n        const markup = array\n            .map((item) => {\n                return `<li class=\"item-box\">\n                <a class=\"large-image\" href=\"${item.largeImageURL}\">\n                <img class=\"preview\" src=\"${item.webformatURL}\" alt=\"${item.tags}\" />\n                </a>\n                <ul class=\"stat-list\">\n                <li class=\"stat-item\">\n                <p class=\"stat-value\">\n                <span class=\"stat-name\">Likes\n                </span>\n                ${item.likes}</p>\n                </li>\n                <li class=\"stat-item\">\n                <p class=\"stat-value\">\n                <span class=\"stat-name\">Views\n                </span>\n                ${item.views}</p>\n                </li>\n                <li class=\"stat-item\">\n                <p class=\"stat-value\">\n                <span class=\"stat-name\">Comments\n                </span>\n                ${item.comments}</p>\n                </li>\n                <li class=\"stat-item\">\n                <p class=\"stat-value\">\n                <span class=\"stat-name\">Downloads\n                </span>\n                ${item.downloads}</p>\n                </li>\n                </ul>\n                </li>`;\n            })\n            .join(\"\");\n        gallery.insertAdjacentHTML(\"beforeend\", markup);\n        lightbox.refresh();\n        showLoadMoreBtn();\n    }\n    hideLoadScreen();\n}\n\n","\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nimport { fetchImages } from \"./js/pixabay-api\";\nimport { gallery, renderImages } from \"./js/render-functions\";\n\n\nexport const loadScreen = document.querySelector(\".loader\");\nfunction showLoadScreen() {\n    loadScreen.classList.remove(\"is-hidden\")\n};\nexport function hideLoadScreen() {\n    loadScreen.classList.add(\"is-hidden\")\n};\nfunction showLoadMoreScreen() {\n    loadScreen.style.margin = \"auto auto 24px\";\n}\n\n\nexport const loadMoreBtn = document.querySelector(\".load-more\");\nexport function showLoadMoreBtn() {\n    loadMoreBtn.classList.remove(\"visually-hidden\");\n};\nexport function hideLoadMoreBtn() {\n    loadMoreBtn.classList.add(\"visually-hidden\");\n};\n\n\nexport let page = 1;\nlet currentSearch;\nlet limit = 15;\nlet totalPages;\nconst form = document.querySelector(\".form\");\nexport const lightbox = new SimpleLightbox('.gallery a', { \n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    hideLoadMoreBtn();\n    showLoadScreen();\n    gallery.innerHTML = \"\";\n    page = 1;\n    let inputValue = event.target.elements.search.value.trim();\n    currentSearch = inputValue;\n    if (inputValue !== \"\") {\n        try {\n            const resolve = await fetchImages(inputValue);\n            renderImages(resolve.hits);\n            totalPages = Math.ceil(resolve.totalHits / limit);\n            hideLoadScreen();\n            form.reset();\n        } catch (error) {\n            console.log(error);\n            hideLoadScreen();\n        }\n    } else {\n        hideLoadMoreBtn();\n        iziToast.show({\n            message: 'Search field is empty',\n            color: 'red',\n            position: 'topRight',\n        });\n        hideLoadScreen();\n    }\n});\n\nloadMoreBtn.addEventListener(\"click\", async (event) => {\n        event.preventDefault();\n        showLoadScreen();\n        page += 1;\n    try {\n        const resolve = await fetchImages(currentSearch);\n        renderImages(resolve.hits);\n        hideLoadScreen();\n        scroll();\n        if (page === totalPages) {\n            hideLoadMoreBtn();\n            iziToast.error({\n                position: \"topRight\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                color: \"blue\",\n            });\n        }\n    } catch (error) {\n        console.log(error);\n        hideLoadScreen();\n    }\n    });\n\nfunction scroll() {\n  const height = gallery.firstChild.getBoundingClientRect().height;\n\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n\n// form.addEventListener(\"submit\", (event) => {\n//     event.preventDefault();\n//     hideLoadMoreBtn();\n//     showLoadScreen();\n//     gallery.innerHTML = \"\";\n//     page = 1;\n//     let inputValue = event.target.elements.search.value.trim();\n//     currentSearch = inputValue;\n//     if (inputValue !== \"\") {\n//         fetchImages(inputValue).then((resolve) => {\n//             renderImages(resolve.hits);\n//             hideLoadScreen();\n//             form.reset();\n//         })\n//             .catch((error) => {\n//                 console.log(error);\n//                 hideLoadScreen();\n//             });\n//     } else {\n//         hideLoadMoreBtn();\n//         iziToast.show({\n//             message: 'Search field is empty',\n//             color: 'red',\n//             position: 'topRight',\n//         });\n//         hideLoadScreen();\n//     }\n// });\n    \n// loadMoreBtn.addEventListener(\"click\", (event) => {\n//     if (page > totalPages) {\n//         hideLoadMoreBtn();\n//         return iziToast.error({\n//             position: \"topRight\",\n//             message: \"We're sorry, but you've reached the end of search results.\",\n//             color: \"blue\",\n//         });\n//     } else {\n//     event.preventDefault();\n//     showLoadScreen();\n//     page += 1;\n//         fetchImages(currentSearch).then((resolve) => {\n//         renderImages(resolve.hits);\n//             hideLoadScreen();\n//             scroll();\n//     })\n//     .catch((error) => {\n//                 console.log(error);\n//                 hideLoadScreen();\n//     })\n//     }\n// });\n// loadMoreBtn.addEventListener(\"click\", async (event) => {\n//     if (page > totalPages) {\n//         hideLoadMoreBtn();\n//         return iziToast.error({\n//             position: \"topRight\",\n//             message: \"We're sorry, but you've reached the end of search results.\",\n//             color: \"blue\",\n//         });\n//     } else {\n//         event.preventDefault();\n//         showLoadScreen();\n//         page += 1;\n//         try {\n//             const resolve = await fetchImages(currentSearch);\n//             renderImages(resolve.hits);\n//             hideLoadScreen();\n//             scroll();\n//         } catch (error) {\n//             console.log(error);\n//             hideLoadScreen();\n//         }\n//     }\n// });\n\n"],"names":["fetchImages","input","axios","page","error","gallery","renderImages","array","iziToast","hideLoadMoreBtn","hideLoadScreen","markup","item","lightbox","showLoadMoreBtn","loadScreen","showLoadScreen","loadMoreBtn","currentSearch","limit","totalPages","form","SimpleLightbox","event","inputValue","resolve","scroll","height"],"mappings":"owBAyBO,MAAMA,EAAc,MAAOC,GAAU,CACxC,GAAI,CAYA,OAXa,MAAMC,EAAM,IAAI,4BAA6B,CAC1D,OAAQ,CACJ,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAME,CACT,CACT,CAAK,GACmB,IACnB,OAAQC,EAAO,CACZ,QAAQ,IAAIA,CAAK,CACpB,CACL,EC7BaC,EAAU,SAAS,cAAc,UAAU,EAEjD,SAASC,EAAaC,EAAO,CAChC,GAAIA,EAAM,OAAS,EACfC,EAAS,KAAK,CACV,QAAS,2EACT,MAAO,MACP,SAAU,UACtB,CAAS,EACDC,IACAC,QACG,CACH,MAAMC,EAASJ,EACV,IAAKK,GACK;AAAA,+CACwBA,EAAK,aAAa;AAAA,4CACrBA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAO9DA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMVA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMVA,EAAK,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMbA,EAAK,SAAS;AAAA;AAAA;AAAA,sBAInB,EACA,KAAK,EAAE,EACZP,EAAQ,mBAAmB,YAAaM,CAAM,EAC9CE,EAAS,QAAO,EAChBC,GACH,CACDJ,GACJ,CCnDO,MAAMK,EAAa,SAAS,cAAc,SAAS,EAC1D,SAASC,GAAiB,CACtBD,EAAW,UAAU,OAAO,WAAW,CAC3C,CACO,SAASL,GAAiB,CAC7BK,EAAW,UAAU,IAAI,WAAW,CACxC,CAMO,MAAME,EAAc,SAAS,cAAc,YAAY,EACvD,SAASH,GAAkB,CAC9BG,EAAY,UAAU,OAAO,iBAAiB,CAClD,CACO,SAASR,GAAkB,CAC9BQ,EAAY,UAAU,IAAI,iBAAiB,CAC/C,CAGO,IAAId,EAAO,EACde,EACAC,EAAQ,GACRC,EACJ,MAAMC,EAAO,SAAS,cAAc,OAAO,EAC9BR,EAAW,IAAIS,EAAe,aAAc,CACrD,aAAc,MACd,aAAc,GAClB,CAAC,EAEDD,EAAK,iBAAiB,SAAU,MAAOE,GAAU,CAC7CA,EAAM,eAAc,EACpBd,IACAO,IACAX,EAAQ,UAAY,GACpBF,EAAO,EACP,IAAIqB,EAAaD,EAAM,OAAO,SAAS,OAAO,MAAM,OAEpD,GADAL,EAAgBM,EACZA,IAAe,GACf,GAAI,CACA,MAAMC,EAAU,MAAMzB,EAAYwB,CAAU,EAC5ClB,EAAamB,EAAQ,IAAI,EACzBL,EAAa,KAAK,KAAKK,EAAQ,UAAYN,CAAK,EAChDT,IACAW,EAAK,MAAK,CACb,OAAQjB,EAAO,CACZ,QAAQ,IAAIA,CAAK,EACjBM,GACH,MAEDD,IACAD,EAAS,KAAK,CACV,QAAS,wBACT,MAAO,MACP,SAAU,UACtB,CAAS,EACDE,GAER,CAAC,EAEDO,EAAY,iBAAiB,QAAS,MAAOM,GAAU,CAC/CA,EAAM,eAAc,EACpBP,IACAb,GAAQ,EACZ,GAAI,CACA,MAAMsB,EAAU,MAAMzB,EAAYkB,CAAa,EAC/CZ,EAAamB,EAAQ,IAAI,EACzBf,IACAgB,IACIvB,IAASiB,IACTX,IACAD,EAAS,MAAM,CACX,SAAU,WACV,QAAS,6DACT,MAAO,MACvB,CAAa,EAER,OAAQJ,EAAO,CACZ,QAAQ,IAAIA,CAAK,EACjBM,GACH,CACL,CAAK,EAEL,SAASgB,GAAS,CAChB,MAAMC,EAAStB,EAAQ,WAAW,sBAAqB,EAAG,OAE1D,SAAS,CACP,IAAKsB,EAAS,EACd,SAAU,QACd,CAAG,CACH"}